<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
		http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="eu.xenit.alfresco.healthprocessor.reporter.ReportsService"
            class="eu.xenit.alfresco.healthprocessor.reporter.ReportsService" autowire="constructor">
        <constructor-arg name="reportsStore"
                ref="eu.xenit.alfresco.healthprocessor.reporter.AttributeHealthReportsStore"/>
    </bean>

    <bean id="eu.xenit.alfresco.healthprocessor.reporter.NodeHealthReportClassifier"
            class="eu.xenit.alfresco.healthprocessor.reporter.NodeHealthReportClassifier" />

    <bean id="eu.xenit.alfresco.healthprocessor.reporter.AttributeHealthReportsStore"
            class="eu.xenit.alfresco.healthprocessor.reporter.AttributeHealthReportsStore">
        <constructor-arg name="attributeStore" ref="eu.xenit.alfresco.healthprocessor.util.AlfrescoAttributeStore" />
        <constructor-arg name="healthReportClassifier"
                ref="eu.xenit.alfresco.healthprocessor.reporter.NodeHealthReportClassifier" />
    </bean>

    <bean id="eu.xenit.alfresco.healthprocessor.reporter.SummaryLoggingHealthReporter"
            class="eu.xenit.alfresco.healthprocessor.reporter.SummaryLoggingHealthReporter">
        <property name="enabled" value="${eu.xenit.alfresco.healthprocessor.reporter.log.summary.enabled}"/>
    </bean>

    <bean id="eu.xenit.alfresco.healthprocessor.reporter.ProgressLoggingHealthReporter"
            class="eu.xenit.alfresco.healthprocessor.reporter.ProgressLoggingHealthReporter">
        <property name="enabled" value="${eu.xenit.alfresco.healthprocessor.reporter.log.progress.enabled}"/>
    </bean>

    <bean id="eu.xenit.alfresco.healthprocessor.reporter.telemetry.AlfredTelemetryHealthReporter"
            class="eu.xenit.alfresco.healthprocessor.reporter.telemetry.AlfredTelemetryHealthReporterFactoryBean">
        <property name="enabled" value="${eu.xenit.alfresco.healthprocessor.reporter.alfred-telemetry.enabled}"/>
    </bean>

    <bean id="eu.xenit.alfresco.healthprocessor.reporter.repository.RepositoryFileHealthReporter"
        class="eu.xenit.alfresco.healthprocessor.reporter.repository.RepositoryFileHealthReporter">
        <property name="enabled" value="${eu.xenit.alfresco.healthprocessor.reporter.repository.file.enabled}"/>
        <constructor-arg ref="NodeService" />
        <constructor-arg name="reportManager">
            <bean class="eu.xenit.alfresco.healthprocessor.reporter.repository.RepositoryReportManager">
                <constructor-arg ref="NodeService" />
                <constructor-arg ref="FileFolderService" />
                <constructor-arg ref="PermissionService" />
                <constructor-arg ref="NamespaceService" />
                <constructor-arg>
                    <bean class="eu.xenit.alfresco.healthprocessor.reporter.repository.DirectoryService">
                        <constructor-arg ref="NodeService" />
                        <constructor-arg ref="DictionaryService" />
                    </bean>
                </constructor-arg>
                <property name="maxChunks" value="${eu.xenit.alfresco.healthprocessor.reporter.repository.file.max-chunks}" />
                <property name="reportsPath" value="${eu.xenit.alfresco.healthprocessor.reporter.repository.file.reports-path}" />
                <property name="keepReports">
                    <bean class="java.time.Duration" factory-method="parse">
                        <constructor-arg value="${eu.xenit.alfresco.healthprocessor.reporter.repository.file.keep-reports}" />
                    </bean>
                </property>
            </bean>
        </constructor-arg>
    </bean>

</beans>
